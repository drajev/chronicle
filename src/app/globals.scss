@use "@/assets/scss/variables.scss" as *;
@use "@/assets/scss/mixins.scss" as *;
@use "@/assets/scss/utils.scss" as *;

// --------------------------------------------------------------
// Theme: 4 base colors per mode. All semantic vars derive from these.
// --------------------------------------------------------------

// Default (light) - applied to :root for SSR and no-JS
:root,
[data-theme="light"] {
  // Palette (4 bases)
  --theme-bg: #{$theme-light-bg};
  --theme-surface: #{$theme-light-surface};
  --theme-muted: #{$theme-light-muted};
  --theme-accent: #{$theme-light-accent};
  --theme-accent-hover: #{$theme-light-accent-hover};
  --theme-accent-muted: #{$theme-light-accent-muted};

  // Gradients
  --gradient-subtle: #{$theme-light-gradient-subtle};
  --gradient-accent: #{$theme-light-gradient-accent};

  // Shadows
  --shadow-sm: #{$theme-light-shadow-sm};
  --shadow-md: #{$theme-light-shadow-md};
  --shadow-lg: #{$theme-light-shadow-lg};
  --shadow-xl: #{$theme-light-shadow-xl};

  // Semantic (derived from palette)
  --text-primary: #2c2825;
  --text-secondary: #5c5650;
  --text-tertiary: #8a837b;
  --text-inverted: #{$theme-light-surface};
  --text-disabled: #b0a89f;
  --text-success: #{$success};
  --text-error: #{$error};
  --text-warning: #{$warning};
  --text-info: #{$info};

  --surface-primary: #{$theme-light-surface};
  --surface-secondary: #{$theme-light-bg};
  --surface-tertiary: #e8e5e0;
  --surface-inverted: #{$theme-light-muted};

  --border-primary: #{$theme-light-muted};
  --border-secondary: #d4cfc8;
  --border-tertiary: #e0dcd6;

  --focus-ring: #{$theme-light-accent};
  --error: #{$error};
  --error-hover: #{$error-dark};
  --error-muted: #{rgba(253, 43, 94, 0.12)};
}

// Dark theme
[data-theme="dark"] {
  --theme-bg: #{$theme-dark-bg};
  --theme-surface: #{$theme-dark-surface};
  --theme-muted: #{$theme-dark-muted};
  --theme-accent: #{$theme-dark-accent};
  --theme-accent-hover: #{$theme-dark-accent-hover};
  --theme-accent-muted: #{$theme-dark-accent-muted};

  --gradient-subtle: #{$theme-dark-gradient-subtle};
  --gradient-accent: #{$theme-dark-gradient-accent};

  --shadow-sm: #{$theme-dark-shadow-sm};
  --shadow-md: #{$theme-dark-shadow-md};
  --shadow-lg: #{$theme-dark-shadow-lg};
  --shadow-xl: #{$theme-dark-shadow-xl};

  --text-primary: #e6edf3;
  --text-secondary: #{$theme-dark-muted};
  --text-tertiary: #6e7681;
  --text-inverted: #{$theme-dark-bg};
  --text-disabled: #484f58;
  --text-success: #{$success};
  --text-error: #{$error};
  --text-warning: #{$warning};
  --text-info: #{$info};

  --surface-primary: #{$theme-dark-surface};
  --surface-secondary: #{$theme-dark-bg};
  --surface-tertiary: #252b33;
  --surface-inverted: #e6edf3;

  --border-primary: #{$theme-dark-border-primary};
  --border-secondary: #{$theme-dark-border-secondary};
  --border-tertiary: #{$theme-dark-border-tertiary};

  --focus-ring: #{$theme-dark-accent};
  --error: #{$error};
  --error-hover: #{$error-dark};
  --error-muted: #{rgba(253, 43, 94, 0.12)};
}

// Design tokens (theme-agnostic)
:root {
  --spacing-xs: #{$spacing-xs};
  --spacing-s: #{$spacing-s};
  --spacing-m: #{$spacing-m};
  --spacing-l: #{$spacing-l};
  --spacing-xl: #{$spacing-xl};
  --radius-component: #{$radius-component};
  --focus-ring-offset: #{$focus-ring-offset};
}

// --------------------------------------------------------------
// Base Styles
// --------------------------------------------------------------
html,
body {
  max-width: 100vw;
  overflow-x: hidden;
}

body {
  color: var(--text-primary);
  background-color: var(--surface-primary);
  font-family: $font-primary;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  transition: background-color $transition-short, color $transition-short;
}

[data-theme="dark"] {
  color-scheme: dark;
}

* {
  box-sizing: border-box;
  padding: 0;
  margin: 0;
}

h1, h2, h3, h4, h5, h6 {
  margin: 0;
  font-weight: 600;
  color: var(--text-primary);
}

h1 { @include h1; }
h2 { @include h2; }
h3 { @include h3; }
h4 { @include h4; }
h5 { @include h5; }
h6 { @include h6; }

p {
  margin: 0;
  @include body1;
}

a {
  color: inherit;
  text-decoration: none;
  transition: color $transition-short;

  &:hover {
    color: var(--text-secondary);
  }

  &:focus-visible {
    @include focus-visible;
  }
}

button {
  font-family: inherit;
  cursor: pointer;
  border: none;
  background: none;
  padding: 0;

  &:focus-visible {
    @include focus-visible;
  }
}

ul, ol {
  margin: 0;
  padding: 0;
  list-style: none;
}
